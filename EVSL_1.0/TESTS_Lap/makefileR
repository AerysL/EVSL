.SUFFIXES : .f .c .o

include ../makefile.in

#EXTLIB = /scratch/syphax/Rational_GEIG/SuiteSparse
#EXTLIB =  /Users/Yuanzhe/Documents/SuiteSparse-1
#EXTLIB = /home/rli/workspace/SuiteSparse-4.5.3
EXTLIB = /home/li50/workspace/SuiteSparse-4.5.3
#EXTLIB =  /scratch/syphax/Rational_GEIG/SuiteSparse-4.5.3/SuiteSparse
# Common flags
FLAGS = -DUNIX -O3 -g -Wall 

#LIB_METIS_5_1 = $(EXTLIB)/metis-5.1.0/build/Darwin-x86_64/libmetis
LIB_METIS_5_1 = $(EXTLIB)/metis-5.1.0/build/Linux-x86_64/libmetis

LIB_UMF = -L$(EXTLIB)/UMFPACK/Lib -lumfpack \
          -L$(EXTLIB)/AMD/Lib/ -lamd \
          -L$(EXTLIB)/SuiteSparse_config -lsuitesparseconfig \
          -L$(EXTLIB)/CHOLMOD/Lib -lcholmod \
	  -L$(EXTLIB)/COLAMD/Lib -lcolamd \
          -L$(LIB_METIS_5_1) -lmetis \
          -L$(EXTLIB)/CCOLAMD/Lib -lccolamd \
	  -L$(EXTLIB)/CAMD/Lib -lcamd

INCLUDES = -I ../INC -I $(EXTLIB)/UMFPACK/Include -I $(EXTLIB)/AMD/Include \
-I $(EXTLIB)/SuiteSparse_config -I $(EXTLIB)/CHOLMOD/Include 

# Object files

OBJS_RR = LapRLanR.o io.o

OBJS_RN = LapRLanN.o io.o

LIB = -L.. -llancheb 

# Rules
default: LapRLanN.ex

%.o : %.c
	$(CC) $(FLAGS)  $(INCLUDES) -o $@ -c $<

# Exe
LapRLanR.ex: $(OBJS_RR) 
	$(LINK) -o LapRLanR.ex $(OBJS_RR) $(LIB) $(LIB_UMF) $(LIBLAPACK) $(LIBBLAS) $(LIB0)

LapRLanN.ex: $(OBJS_RN) 
	$(LINK) -o LapRLanN.ex $(OBJS_RN) $(LIB) $(LIB_UMF) $(LIBLAPACK) $(LIBBLAS) $(LIB0)

all: LapRLanR.ex LapRLanN.ex 

clean:
	rm -f *.o *.ex 
